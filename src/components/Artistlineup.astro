---
import Artistimg from "../components/Artistimg.astro";

const artists = await fetch(
  "https://qrmsxsqepinalqgbykma.supabase.co/rest/v1/artists?limit=8",
  {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFybXN4c3FlcGluYWxxZ2J5a21hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg2MzkwMzIsImV4cCI6MjA0NDIxNTAzMn0.-c24Labp4ehDyWSghIjoa_klzOKVqUva3hzdr5e8BUQ",
    },
  }
).then((Response) => Response.json());
---

<section class="container">
  <p id="stage1">Stage 1 <br /> Manegen</p>
  <p id="stage2">Stage 2 <br /> Tribunen</p>
  <section id="lineup">
    {
      artists.map((artist) => {
        return <Artistimg artistdata={artist} />;
      })
    }
  </section>
</section>
<style>
  .container {
    /* outline: dashed 2px red; */
    display: grid;
    grid-template-columns: 80px 1fr 10fr;
    grid-template-rows: repeat(4, 1fr);

    justify-content: center;
  }

  #lineup {
    max-height: fit-content;
    grid-column: 3/-1;
    grid-row: 1/-1;

    display: grid;
    grid-template-columns: repeat(12, 80px);
    grid-template-rows: repeat(4, 1fr);

    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
  }
  #stage1 {
    grid-column: 1/3;
    grid-row: 1/3;

    align-self: center;
  }
  #stage2 {
    grid-column: 1/3;
    grid-row: 3/5;

    align-self: center;
  }
</style>
